---
title: 将数组格式的字符串转换成数组
date: 2020-06-26 16:00:00
tags: [JS, ES6, 开发笔记]
---

## [将数组格式的字符串转换成数组](https://www.cnblogs.com/shy0113/p/12064590.html)



由于后台原因，前端拿到的数组格式的字符串有以下2种格式，2种格式的处理方式也不一样

```
let str1= '["a", "b", "c", "d"]'
let str2="['a','b','c','d']"
```

### 1，使用 eval() 函数转换

```js
let arr =  eval('(' + str1 + ')');  
//["a", "b", "c", "d"]
```

```js
let arr =  eval('(' + str2 + ')');  
//['a','b','c','d']
```

### 2，使用 JSON.parse() 方法转换

> 由于数组类型也是对象， 可以使用 JSON.parse()将字符串转成数组

```js
let str1= '["a", "b", "c", "d"]'
JSON.parse(str1)
//["a", "b", "c", "d"]
```

```js
let str2="['a','b','c','d']"
JSON.parse(str2)
//报错
```

### 3，使用 str.replace()   之类的字符串拼接

```js
str.replace(/^\"|\"$/g,'')
//貌似没啥作用
```



## eval()     

> eval() 可以接受一个**字符串**str作为参数，并把这个参数作为脚本代码来执行。
> 美 ['ivl]  评价

**参数**

- 如果参数是一个表达式，eval() 函数将执行表达式；

- 如果参数是Javascript语句，eval()将执行 Javascript 语句；

- 如果执行结果是一个值就返回，不是就返回undefined，如果参数不是一个字符串，则直接返回该参数。

**语法**

```js
   eval(string)
```

**举例**

```js
eval("var a=1");//声明一个变量a并赋值1。

eval("2+3");//执行加运算，并返回运算值。

eval("mytest()");//执行mytest()函数。

eval("{b:2}");//会将{}解析为代码块   返回 2

eval("({b:2})")//声明一个对象，在对象外面再嵌套一层,返回此对象 返回 {b:2}
```

注意：使用eval来解析JSON格式字符串的时候，会将{}解析为代码块，而不是对象的字面量。
1，在JSON格式的字符串前面拼接上 "var o ="；
2，把JSON格式的字符串使用()括起来，就不会将{}解析为代码块，而是表达式。